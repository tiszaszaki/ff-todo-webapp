<div>
    <app-ff-todo-generic-task-form #editTaskForm [mode]="EDIT_TASK" [todoId]="todoId" [(model)]="taskSelected"
            [preparingFormEvent]="prepareEditTaskFormTrigger.asObservable()" (submitDataEvent)="updateTask($event)">
    </app-ff-todo-generic-task-form>
    <app-ff-todo-generic-task-form #removeTaskForm [mode]="REMOVE_TASK" [todoId]="todoId" [(model)]="taskSelected"
            [preparingFormEvent]="prepareRemoveTaskFormTrigger.asObservable()" (submitDataEvent)="removeTask($event)">
    </app-ff-todo-generic-task-form>
</div>
<div class="mt-1" #taskList="ngbCollapse" [(ngbCollapse)]="tasklist_collapse_status">
    <ul class="list-group border border-primary"
            data-toggle="tooltip" data-placement="bottom" title="Task list">
        <li class="list-group-item" *ngFor="let task of tasks | tszSort:tasksortexec:tasksortfield:tasksortdir">
            <div>
                <div class="d-flex justify-content-between">
                    <div>
                        <button type="button" class="btn btn-primary btn-sm text-end" (click)="prepareEditTaskForm(task)"
                                data-toggle="tooltip" data-placement="bottom" title="View Task details" *ngIf="!readonlyTask">
                            <i class="fas fa-pencil-alt"></i>
                        </button>
                        <button type="button" class="btn btn-danger btn-sm text-end" (click)="prepareRemoveTaskForm(task)"
                                data-toggle="tooltip" data-placement="bottom" title="Remove Task" *ngIf="!readonlyTask">
                            <i class="fas fa-trash-alt"></i>
                        </button>
                        <input class="form-check-input" type="checkbox" [ngModel]="task.done"
                                data-toggle="tooltip" data-placement="bottom" title="Check Task"
                                (click)="checkTask(task)" *ngIf="!readonlyTask" id="task_name">
                        <label for="task_name">
                            <span class="text-muted mr-1" data-toggle="tooltip" data-placement="bottom" title="Task ID">
                                ({{ task.id }})
                            </span>
                            <span data-toggle="tooltip" data-placement="bottom" title="Task name" [innerHTML]="highlightedNames.get(task.id)">
                                {{ task.name }}
                            </span>
                        </label>
                    </div>
                    <div *ngIf="task.deadline" data-toggle="tooltip" data-placement="bottom" title="{{ getTaskPlaceholder(task) }}">
                        <i class="far fa-calendar-alt"></i>
                    </div>
                </div>
            </div>
        </li>
        <li class="list-group-item" *ngIf="!taskCount">
            <app-ff-todo-task-list-empty></app-ff-todo-task-list-empty>
        </li>
        <li class="list-group-item border border-primary" *ngIf="showTaskCount[0] || showTaskCount[1]">
            <p class="card-text">Task count: {{ taskCount }}</p>
        </li>
    </ul>
</div>
<div class="d-flex justify-content-end my-3">
    <button class="btn btn-sm btn-secondary" type="button" (click)="taskList.toggle()"
            data-toggle="tooltip" data-placement="bottom" title="Toggle Task list">
        <i *ngIf="!tasklist_collapse_status" class="fas fa-folder-minus"></i>
        <i *ngIf="tasklist_collapse_status" class="fas fa-folder-plus"></i>
    </button>
</div>